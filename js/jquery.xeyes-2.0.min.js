(function(e){var b={padding:0,reset:false,radius:"natural",position:"center",trigger:window};var a={top:90,bottom:-90,left:180,right:0,topRight:45,topLeft:135,bottomRight:-45,bottomLeft:-135};function c(f){this.$iris=f;f.css("position","absolute");this.width=f.outerWidth();this.height=f.outerHeight();this.resetOffset=function(){var g=f.offset();this.offset={x:g.left+(this.width/2)-parseInt(f.css("left")),y:g.top+(this.height/2)-parseInt(f.css("top"))}}}function d(g,f){this.$eye=g;g.css("position","relative");this.width=g.width();this.height=g.height();this.iris=new c(f);this.pos={x:(this.width-this.iris.width)/2,y:(this.height-this.iris.height)/2};f.css("left",this.pos.x+"px").css("top",this.pos.y+"px");this.padding=0}d.prototype.follow=function(g){g.x=g.x-this.pos.x;g.y=g.y-this.pos.y;this.iris.resetOffset();var j=Math.atan((g.y-this.iris.offset.y)/(g.x-this.iris.offset.x)),i=(this.iris.offset.x>g.x)?-1:1,k=Math.cos(j)*((this.width-this.iris.width)/2-this.padding)*i,h=Math.sin(j)*((this.height-this.iris.height)/2-this.padding)*i,f=Math.sqrt(Math.pow(k,2)+Math.pow(h,2)),l=Math.sqrt(Math.pow(g.y-this.iris.offset.y,2)+Math.pow(g.x-this.iris.offset.x,2));if(f>l){this.iris.$iris.css("left",(g.x-this.iris.offset.x+this.pos.x)+"px").css("top",(g.y-this.iris.offset.y+this.pos.y)+"px")}else{this.iris.$iris.css("left",this.pos.x+k+"px").css("top",this.pos.y+h+"px")}};d.prototype.setPosition=function(f){if(f.x!==undefined&&f.y!==undefined){this.iris.$iris.css("left",this.pos.x-f.x+"px").css("top",this.pos.y-f.y+"px")}else{if(typeof f==="number"){var h=f*Math.PI/-180;this.iris.$iris.css("left",this.pos.x+Math.cos(h)*(this.width/2-this.iris.width/2-this.padding)+"px").css("top",this.pos.y+Math.sin(h)*(this.height/2-this.iris.height/2-this.padding)+"px")}else{if(f==="center"){this.iris.$iris.css("left",this.pos.x+"px").css("top",this.pos.y+"px")}else{if(a[f]!==undefined){var g=a[f]*Math.PI/-180;this.iris.$iris.css("left",this.pos.x+Math.cos(g)*(this.width/2-this.iris.width/2-this.padding)+"px").css("top",this.pos.y+Math.sin(g)*(this.height/2-this.iris.height/2-this.padding)+"px")}}}}};e.fn.xeyes=function(g){g=e.extend(b,g);var h=parseInt(g.padding,10);var f=e(g.trigger);this.each(function(m,j){var k=e(j),l=k.parent();var i=new d(l,k);i.padding=h;if(g.radius=="circular"&&i.width>i.height){i.width=i.height}else{if(g.radius=="circular"){i.height=i.width}}i.setPosition(g.position);f.mousemove(function(n){i.follow({x:n.pageX,y:n.pageY})});if(g.reset){f.mouseleave(function(n){i.setPosition(g.position)})}})}})(jQuery);